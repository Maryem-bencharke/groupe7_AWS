<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Games</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://groupe7-aws.onrender.com/socket.io/socket.io.js"></script>
    <script src="games.js" defer></script>
    <script type="module">
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";

        const firebaseConfig = {
            // Votre configuration Firebase ici
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth();
        const db = getFirestore(app);

        onAuthStateChanged(auth, async (user) => {
            if (user) {
                const userRef = doc(db, "users", user.uid);
                const userDoc = await getDoc(userRef);

                if (userDoc.exists()) {
                    const userData = userDoc.data();
                    document.getElementById("userBilan").innerText = `Bilan: ${userData.bilan}`;
                    document.getElementById("userRanking").innerText = `Classement: ${userData.ranking}`;
                }
            }
        });
    </script>
    <style>
        #userStats {
            position: absolute;
            top: 10px;
            right: 10px;
            text-align: right;
        }
    </style>
</head>
<body>
    <header>
        <h1>Games</h1>
    </header>

    <div id="userStats">
        <p id="userBilan">Bilan: 0-0</p>
        <p id="userRanking">Classement: N/A</p>
    </div>

    <main class="games-container">
        <div class="game-card pendu">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQT7pzxS62VHqXPaTn4LKZsjck99OU4gPBGjQ&s" alt="Pendu">
            <h2>Pendu</h2>
            <p>Devinez le mot avant qu'il ne soit trop tard !</p>
            <button onclick="location.href='pendu.html'">Jouer</button>
        </div>

        <div class="game-card wordle">
            <img src="https://gilde-nimrod.gcm-corp.com/images/61dea1d345e7b498943787.jpg?ext=jpg" alt="Wordle">
            <h2>Wordle</h2>
            <p>Trouvez le mot caché en 6 essais.</p>
            <button onclick="location.href='wordle.html'">Jouer</button>
        </div>

        <div class="game-card bomb">
            <img src="https://th.bing.com/th/id/R.100f9db196ee5cdca3bafe332a0f06ae?rik=zbpTk%2bReftA1nQ&pid=ImgRaw&r=0" alt="Bomb">
            <h2>Bomb Game</h2>
            <p>Enchaînez des mots avec une syllabe donnée.</p>
            <button onclick="location.href='bombGame.html'">Jouer</button>
        </div>
    </main>

    <table>
        <tr>
            <td>
                <input id="roomName" class="textArea" placeholder="Saisissez un nom">
            </td>
            <td>
                <select class="textArea" id="gameSelect">
                    <option value="pendu">Pendu</option>
                    <option value="wordle">Wordle</option>
                    <option value="bombGame">Bomb Game</option>
                </select>
            </td>
            <td>
                <button id="createRoom">Créer une salle</button>
            </td>
        </tr>
    </table>

    <table id="roomsList"></table>
</body>
</html>
